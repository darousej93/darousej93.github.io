<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>runtime
    </title>
    <style>
        img{
            display:none;
        }
    </style>
  </head>
  <body>
    <canvas id='canvas' width='900' height="700"></canvas>
    <img id='halle' src='/runtime/img/halle-v9.png'>

    <script>
        var canvas = document.getElementById("canvas")
        var ctx = canvas.getContext('2d')

        setInterval(main,50)

        //setup variables
        var walkspeed = 1

        //player Variables
        var playerX = 0 
        var playerY = 0 
        var playerSpeedX = 0
        var playerSpeedY = 0
        var upPress = false
        var leftPress = false
        var downPress = false
        var rightPress = false
        var spacePress = false
        var frameCount = 0

        //platform variables
        var platformX = []
        var platformY = []
        var platformWidth = []
        var platformHeight = []

        //cannon variables
        
        
        halleHeight = 120
        halleWidth = 85
        xpicture = 2295
        ypicture = 1330


        function main(){
            frameCount++
            ctx.clearRect(0,0,1000,1000)
            playerX = playerX + playerSpeedX
            playerY = playerY + playerSpeedY
            //ctx.drawImage(imageVaribale, sourceY, SourceX, sourceWidth, sourceHeight, canvasX, canvasY, finalWidth, finalHeight)
            //https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/drawImage
            //you only need the extra four source arguments if you want to only display a portion of the picture, if you want to show the whole picture you can just do drawImage(imageVar, canvasx, canvasy, width,height)
            ctx.drawImage(halle,xpicture,ypicture,halleWidth,halleHeight,playerX,playerY,halleWidth,halleHeight)
            if(frameCount > 15){
                xpicture += halleWidth
                frameCount = 0
            }




            if(upPress){
                playerSpeedY -= walkspeed
            }
            if(downPress){
                playerSpeedY += walkspeed
            }
            if(leftPress){
                playerSpeedX -= walkspeed
            }
            if(rightPress){
                playerSpeedX += walkspeed
            }


            if(playerX > canvas.width){
                playerSpeedX = -playerSpeedX
            }
            if(playerX < 0){
                playerSpeedX = -playerSpeedX
            }
            if(playerY > canvas.height){
                playerSpeedY = -playerSpeedY
            }
            if(playerY < 0){
                playerSpeedY = -playerSpeedY
            }
        }

    document.addEventListener("keydown", keyleftPress,false)
	document.addEventListener("keyup", keyuppress,false)


    function collision(){

    }

    function createPlatform(x,y,width,height){

    }

    function createCannon(position,x,y){

    }

    function createProjectile (x,y,xspeed,yspeed){


    }


    function detectWhichKeysAreBeingPressed(){
        
    }

	function keyleftPress(e){ //the e in this parenthesis is a parameter, it contains information about what key you pressed. e is also short for event in this case. 
		if(e.key === "ArrowUp" || e.key === "w" ){ // || means or. || is or && is and. if one or the other is true, then true. this if is asking if the key is w or arrowup
			upPress= true
		}
		if(e.key === "ArrowLeft" || e.key === "a"){
			leftPress= true
		}
		if(e.key === "ArrowDown" || e.key === "s"){
			downPress= true
		}
		if(e.key === "ArrowRight" || e.key === "d"){
			rightPress= true
		}
		if(e.key === " "){
			spacePress= true
		}
			
	}
	function keyuppress(e){ //keydown and keyup are both needed because both are important. think of a gas pedal: you want to car to know you pressed down the pedal, and you REALLY want it to know when you let up on the gas. 
		if(e.key === "ArrowUp"|| e.key === "w"){
			upPress= false
		}
		if(e.key === "ArrowLeft"|| e.key === "a"){
			leftPress= false
		}
		if(e.key === "ArrowDown"|| e.key === "s"){
			downPress= false
		}
		if(e.key === "ArrowRight"|| e.key === "d"){
			rightPress= false
		}
		if(e.key === " "){
			spacePress= false
		}
	}

    </script>
  </body>
</html>